<Window x:Class="biped.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Biped"
        Width="460"
        SizeToContent="Height"
        ResizeMode="CanMinimize"
        WindowStartupLocation="CenterScreen"
        Background="#FAFAFA">

    <!-- Shared compact styles to keep controls consistent -->
    <Window.Resources>
        <!-- Compact ComboBox (you can still override locally if needed) -->
        <Style TargetType="ComboBox">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Padding" Value="6,2" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="MinHeight" Value="26" />
            <Setter Property="MaxDropDownHeight" Value="200" />
            <Setter Property="Margin" Value="0" />
        </Style>

        <Style TargetType="ComboBoxItem">
            <Setter Property="Padding" Value="6,3" />
            <Setter Property="FontSize" Value="12" />
        </Style>

        <!-- Compact button used for toolbar-ish buttons -->
        <Style x:Key="CompactButton" TargetType="Button">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="MinHeight" Value="26" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="4,0,0,0" />
        </Style>

        <!-- A subtle groupbox style so the header doesn't add extra vertical padding -->
        <Style TargetType="GroupBox">
            <Setter Property="Padding" Value="6" />
            <Setter Property="Margin" Value="15,5,15,5" />
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ROW 0: PROFILE HEADER -->
        <Border Grid.Row="0" Background="#F0F0F0" BorderBrush="#DDD" BorderThickness="0,0,0,1" Padding="10,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Profile:" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,10,0"/>

                <!-- Profile selector uses the compact ComboBox style from Window.Resources -->
                <ComboBox x:Name="ProfileSelector"
                          Grid.Column="1"
                          SelectionChanged="ProfileSelector_SelectionChanged"
                          Margin="0,0,5,0"
                          MinWidth="120" />

                <Button Content="+ New"
                        Grid.Column="2"
                        Style="{StaticResource CompactButton}"
                        Click="NewProfile_Click"
                        Background="White"
                        ToolTip="Create a new blank profile"/>

                <Button Content="🗑"
                        Grid.Column="3"
                        Style="{StaticResource CompactButton}"
                        Click="DeleteProfile_Click"
                        Background="White"
                        ToolTip="Delete current profile"
                        Foreground="#AA0000"/>

                <Button Content="📂"
                        Grid.Column="4"
                        Style="{StaticResource CompactButton}"
                        Click="OpenFolder_Click"
                        Background="White"
                        ToolTip="Open Config Folder"/>
            </Grid>
        </Border>

        <!-- ROW 1: STATUS -->
        <TextBlock x:Name="StatusText"
                   Grid.Row="1"
                   Text="Initializing..."
                   TextAlignment="Center"
                   Foreground="#555"
                   Margin="15,10,15,5"
                   TextWrapping="Wrap"/>

        <!-- ROW 2: HARDWARE SELECTION -->
        <GroupBox Grid.Row="2" Header="Hardware Selection" BorderBrush="#CCC">
            <Grid Margin="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="Device:" VerticalAlignment="Center" Margin="0,0,10,0"/>

                    <!-- Device combo deliberately stays compact and vertically centered -->
                    <ComboBox x:Name="DeviceSelector"
                              Grid.Column="1"
                              SelectionChanged="DeviceSelector_SelectionChanged"
                              MinWidth="200"
                              HorizontalAlignment="Stretch" />

                    <!-- Actions button styled to visually match the ComboBox height -->
                    <Button x:Name="MapButton"
                            Grid.Column="2"
                            Content="Actions"
                            Style="{StaticResource CompactButton}"
                            FontWeight="SemiBold"
                            Background="White"
                            BorderBrush="#CCC"
                            BorderThickness="1"
                            Cursor="Hand">
                        <Button.ContextMenu>
                            <ContextMenu x:Name="MapContextMenu" StaysOpen="False">
                                <MenuItem x:Name="MapPos1" Header="Map to Position 1" Tag="1" Click="MapMenu_Click"/>
                                <MenuItem x:Name="MapPos2" Header="Map to Position 2" Tag="2" Click="MapMenu_Click"/>
                                <MenuItem x:Name="MapPos3" Header="Map to Position 3" Tag="3" Click="MapMenu_Click"/>
                                <MenuItem x:Name="MapPos4" Header="Map to Position 4" Tag="4" Click="MapMenu_Click"/>
                                <Separator/>
                                <MenuItem x:Name="UnmapMenuItem"
                                          Header="Unmap this device"
                                          Tag="unmap"
                                          Click="MapMenu_Click"
                                          Foreground="#B00000"
                                          FontWeight="SemiBold"/>
                            </ContextMenu>
                        </Button.ContextMenu>
                    </Button>
                </Grid>

                <!-- Device details row (smaller text) -->
                <TextBlock x:Name="DeviceDetailText"
                           Grid.Row="1"
                           Text="ID: ..."
                           Foreground="Gray"
                           FontSize="9"
                           Margin="0,6,0,0" />

            </Grid>
        </GroupBox>

        <!-- ROW 3: CLEAR BINDINGS -->
        <Grid Grid.Row="3" Margin="15,5,15,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="0"
                       Text="Current Bindings:"
                       VerticalAlignment="Center"
                       FontWeight="SemiBold"
                       Foreground="#333" />

            <Button x:Name="ClearBindingsButton"
                    Grid.Column="1"
                    Content="Clear All Bindings"
                    HorizontalAlignment="Right"
                    Click="ClearBindings_Click"
                    Style="{StaticResource CompactButton}"/>
        </Grid>

        <!-- ROW 4: PEDAL BOXES -->
        <Grid Grid.Row="4" VerticalAlignment="Center" Margin="15,0,15,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Border x:Name="LeftBorder"
                    Grid.Column="0"
                    BorderBrush="#555"
                    BorderThickness="1"
                    CornerRadius="5"
                    Height="60"
                    Background="Transparent">
                <TextBlock x:Name="LeftText"
                           Text="None"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="#333"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextWrapping="Wrap"/>
            </Border>

            <Border x:Name="MiddleBorder"
                    Grid.Column="2"
                    BorderBrush="#555"
                    BorderThickness="1"
                    CornerRadius="5"
                    Height="60"
                    Background="Transparent">
                <TextBlock x:Name="MiddleText"
                           Text="None"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="#333"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextWrapping="Wrap"/>
            </Border>

            <Border x:Name="RightBorder"
                    Grid.Column="4"
                    BorderBrush="#555"
                    BorderThickness="1"
                    CornerRadius="5"
                    Height="60"
                    Background="Transparent">
                <TextBlock x:Name="RightText"
                           Text="None"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="#333"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextWrapping="Wrap"/>
            </Border>
        </Grid>

        <!-- ROW 5: FOOTER -->
        <StatusBar Grid.Row="5" Background="#F0F0F0" Margin="0,10,0,0">
            <StatusBarItem HorizontalAlignment="Center">
                <TextBlock Text="Press pedal to bind | Esc to cancel | Del to unbind"
                           Foreground="Gray"
                           FontSize="11" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
